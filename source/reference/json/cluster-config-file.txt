.. _atlas-cli-cluster-config-file:

==============================
{+Cluster+} Configuration File
==============================

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol


.. |atlas-cli command| replace:: :ref:`atlas-clusters-search-nodes-create`
.. |configuration-file-name| replace:: search nodes configuration  
.. |openapi-link| replace:: :oas-atlas-tag:`Create Search Nodes </Atlas-Search/operation/createAtlasSearchDeployment>`
.. |action| replace:: create search nodes
.. |atlas-cli command 2| replace:: :ref:`atlas-clusters-search-nodes-update`
.. |openapi-link 2| replace:: :oas-atlas-tag:`Update Search Nodes </Atlas-Search/operation/updateAtlasSearchDeployment>`
.. |action 2| replace:: update search nodes

You can use a |configuration-file-name| file to specify the
settings required when you |action| or |action 2|
using the {+atlas-cli+}. The {+atlas-cli+} accepts ``.json`` 
|configuration-file-name| files.

.. _required-cluster-settings:
.. _optional-cluster-settings:

Available Settings
------------------

When you |action| using a configuration file, you
can specify any settings that are listed in 
|openapi-link| under :guilabel:`Request Body Schema`.

When you |action 2| using a configuration file, you
can specify any settings that are listed in 
|openapi-link 2| under :guilabel:`Request Body Schema`.

.. _example-cluster-config-file:
.. _multi-cloud-example-cluster-config-file:
.. _geosharded-example-cluster-config-file:

Create a Configuration File
---------------------------

Create a Search Node
~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/steps-config-file-template.rst

Update a Search Node
~~~~~~~~~~~~~~~~~~~~

.. |atlas-cli command| replace:: :ref:`atlas-clusters-search-nodes-create`
.. |configuration-file-name| replace:: search nodes configuration  
.. |openapi-link| replace:: :oas-atlas-tag:`Create Search Nodes </Atlas-Search/operation/createAtlasSearchDeployment>`
.. |action| replace:: create search nodes

.. include:: /includes/steps-config-file-template.rst








Example Cluster Configuration File
----------------------------------

To create a {+cluster+} using a single cloud provider, specify the same
service provider for your ``regionConfigs`` objects as shown in the
following example file:

.. literalinclude:: /includes/json-cluster-config-file.json



Example Multi-Cloud Cluster Configuration File
----------------------------------------------

To create a multi-cloud {+cluster+}, specify more than one
service provider for your ``regionConfigs`` objects as shown in the
following example file:

.. literalinclude:: /includes/json-cluster-config-file-multi.json



Example Geosharded Cluster Configuration File
---------------------------------------------

To create a :ref:`geosharded <global-clusters>` {+cluster+}, specify zones for your ``replicationSpecs`` objects as shown in the following example file:

.. literalinclude:: /includes/geosharded-cluster-config-file.json